[tools]
go = "latest"

[tasks.build]
run = """
go build -ldflags "\
  -X hmans.dev/beans/cmd/beans.version=$(git describe --tags --always --dirty 2>/dev/null || echo dev) \
  -X hmans.dev/beans/cmd/beans.commit=$(git rev-parse --short HEAD 2>/dev/null || echo unknown) \
  -X hmans.dev/beans/cmd/beans.date=$(date -u +%Y-%m-%dT%H:%M:%SZ)" \
  .
"""

[tasks.install]
depends = "build"
run = "cp beans ~/.local/bin/beans"
